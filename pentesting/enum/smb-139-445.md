# SMB - 139, 445



#### Access SMB server

```bash
# lists what services are available on a server
smbclient -L $IP

# connect to shares
smbclient //<host>/<share>

#Download everything to current directory
smbclient //<IP>/<share>
> mask ""
> recurse
> prompt
> mget *
```

```bash
# view the permissions on the share drives.
smbmap -H $IP -R
# -H for hostname 
# -R for recursive
```

#### Vulnerability Scan

```bash
# List all SMB nse scripts
ls /usr/share/nmap/scripts/smb*

# Run all SMB related nse scripts 
nmap --script smb-vuln* -p 445 $IP
```

#### Bruteforcing SMB

```bash
# with hydra
hydra -L user.txt -P pass.txt $IP smb

# Enumerate users with Metasploit
use auxiliary/scanner/smb/smb_enumusers
```
